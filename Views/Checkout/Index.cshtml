@model Bloomfiy_final.Models.CheckoutViewModel
@{
    ViewBag.Title = "Checkout";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="checkout-container">

    <h2 class="checkout-title">Checkout</h2>

    <div class="checkout-grid">

        <!-- ORDER SUMMARY -->
        <div class="checkout-summary-box">
            <h2 class="summary-title">Order Summary</h2>

            @foreach (var item in Model.CartItems)
            {
                <div class="summary-item">
                    <div class="summary-item-left">
                        <img src="@item.ImageUrl" alt="@item.Name" class="summary-img" />

                        <div class="summary-info">
                            <h3>@item.Name</h3>

                            <p class="summary-color">Color: @item.Color</p>

                            @if (item.HasBouquet)
                            {
                                <p class="summary-bouquet">🌸 Bouquet Wrap (+$10)</p>
                            }
                        </div>
                    </div>

                    <div class="summary-item-right">
                        <span class="summary-qty">x @item.Quantity</span>
                        <span class="summary-total">$@item.TotalPrice</span>
                    </div>
                </div>
            }

            <div class="summary-total-box">
                <span>Total:</span>
                <span class="summary-grand-total">
                    $@Model.CartItems.Sum(x => x.TotalPrice)
                </span>
            </div>
        </div>


        <!-- RIGHT SIDE – FORM -->
        <div class="checkout-form">
            <h3>Billing Details</h3>

            @using (Html.BeginForm("PlaceOrder", "Checkout", FormMethod.Post))
            {
                <label>Full Name</label>
                @Html.TextBoxFor(m => m.Input.FullName, new { @class = "input-field" })
                @Html.ValidationMessageFor(m => m.Input.FullName)

                <label>City</label>
                @Html.TextBoxFor(m => m.Input.City, new { @class = "input-field" })

                <label>Address</label>
                @Html.TextBoxFor(m => m.Input.Address, new { @class = "input-field" })

                <label>Phone Number</label>
                @Html.TextBoxFor(m => m.Input.Phone, new { @class = "input-field" })

                <h3 class="payment-title">Payment Method</h3>

                <div class="credit-card-box">
                    <label>Card Number</label>
                    <input type="text" class="input-field" placeholder="1234 5678 9012 3456" required />

                    <div class="card-row">
                        <div>
                            <label>Expiry</label>
                            <input type="text" class="input-field" placeholder="MM/YY" required />
                        </div>
                        <div>
                            <label>CVC</label>
                            <input type="text" class="input-field" placeholder="123" required />
                        </div>
                    </div>
                </div>

                <button type="submit" class="place-order-btn">
                    ✔ Place Order ($@Model.CartItems.Sum(x => x.TotalPrice))
                </button>
            }
        </div>

    </div>

</section>
