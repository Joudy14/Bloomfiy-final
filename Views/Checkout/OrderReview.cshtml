
@{
    ViewBag.Title = "OrderReview";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="checkout-page">
    <div class="checkout-container">
        <!-- Progress Bar -->
        <div class="checkout-progress">
            <div class="progress-step completed">
                <div class="step-number">✓</div>
                <div class="step-label">Shipping</div>
            </div>
            <div class="progress-step completed">
                <div class="step-number">✓</div>
                <div class="step-label">Payment</div>
            </div>
            <div class="progress-step active">
                <div class="step-number">3</div>
                <div class="step-label">Review</div>
            </div>
            <div class="progress-step">
                <div class="step-number">4</div>
                <div class="step-label">Complete</div>
            </div>
        </div>

        <!-- Checkout Header -->
        <div class="checkout-header">
            <h1>Review Your Order</h1>
            <p>Please review all details before placing your order</p>
        </div>

        <!-- Order Review Card -->
        <div class="checkout-card">
            <!-- Order Items -->
            <div class="form-section">
                <h2>Order Items</h2>
                <div class="order-review-items">
                    <div class="order-review-item">
                        <div class="item-image">
                            <img src="/Images/product_img/peony/peony_pink.png" alt="Pink Peony Bouquet">
                        </div>
                        <div class="item-details">
                            <h4>Pink Peony Bouquet</h4>
                            <p>Seasonal Collection · Quantity: 1</p>
                            <p>Deluxe arrangement with premium packaging</p>
                        </div>
                        <div class="item-price">$45.99</div>
                    </div>

                    <div class="order-review-item">
                        <div class="item-image">
                            <img src="/Images/product_img/chrysanthemum_pink.png" alt="Chrysanthemum Arrangement">
                        </div>
                        <div class="item-details">
                            <h4>Chrysanthemum Arrangement</h4>
                            <p>With greenery · Quantity: 1</p>
                            <p>Includes seasonal foliage</p>
                        </div>
                        <div class="item-price">$38.50</div>
                    </div>

                    <div class="order-review-item">
                        <div class="item-image">
                            <img src="/Images/product_img/rose_bouquet.jpg" alt="Rose Bouquet">
                        </div>
                        <div class="item-details">
                            <h4>Rose Bouquet</h4>
                            <p>Mixed colors · Quantity: 2</p>
                            <p>12 roses with baby's breath</p>
                        </div>
                        <div class="item-price">$59.98</div>
                    </div>
                </div>
            </div>

            <!-- Shipping Information -->
            <div class="form-section">
                <h2>Shipping Information</h2>
                <div class="review-details">
                    <p>
                        <strong>Jane Smith</strong><br>
                        customer@example.com · (123) 456-7890
                    </p>
                    <p>
                        123 Flower Street, Apt 4B<br>
                        San Francisco, CA 94107<br>
                        United States
                    </p>
                    <p><strong>Shipping Method:</strong> Standard Delivery (3-5 business days) - $5.99</p>
                </div>
                <a href="@Url.Action(" Step1", "Checkout" )" class="edit-link">Edit Shipping</a>
            </div>

            <!-- Payment Information -->
            <div class="form-section">
                <h2>Payment Information</h2>
                <div class="review-details">
                    <p><strong>Payment Method:</strong> Credit Card</p>
                    <p>Card ending in **** 3456 · Expires 12/25</p>
                </div>
                <a href="@Url.Action(" Step2", "Checkout" )" class="edit-link">Edit Payment</a>
            </div>

            <!-- Order Summary -->
            <div class="form-section">
                <h2>Order Summary</h2>
                <div class="order-summary-box">
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span>$144.47</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping</span>
                        <span>$5.99</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax</span>
                        <span>$10.13</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total</span>
                        <span>$160.59</span>
                    </div>
                </div>
            </div>

            <!-- Terms and Conditions -->
            <div class="form-section">
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="terms" required>
                        I agree to the <a href="#">Terms and Conditions</a> and understand that my order cannot be canceled once placed.
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="newsletter" checked>
                        Sign up for our newsletter to receive exclusive offers and floral tips.
                    </label>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="checkout-navigation">
                <a href="@Url.Action(" Step2", "Checkout" )" class="nav-btn back">← Back to Payment</a>
                <button type="button" id="placeOrderBtn" class="nav-btn place-order">Place Order</button>
            </div>
        </div>
    </div>
</section>

<!-- Success Modal -->
<div id="loadingModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); z-index: 2000; justify-content: center; align-items: center;">
    <div style="text-align: center; padding: 50px;">
        <div class="success-icon" style="font-size: 4rem; color: #5a7c5a;">🌺</div>
        <h2 style="color: #5a7c5a; font-style: italic; margin: 20px 0;">Processing Your Order</h2>
        <p style="color: #666;">Preparing your beautiful flowers...</p>
        <div class="loading-spinner" style="width: 50px; height: 50px; border: 3px solid #f3f3f3; border-top: 3px solid #5a7c5a; border-radius: 50%; margin: 30px auto; animation: spin 1s linear infinite;"></div>
    </div>
</div>

<style>
    .edit-link {
        color: #8b7355;
        text-decoration: none;
        font-weight: 500;
        border-bottom: 1px solid #8b7355;
        padding-bottom: 2px;
        display: inline-block;
        margin-top: 10px;
    }

        .edit-link:hover {
            color: #5a7c5a;
            border-bottom-color: #5a7c5a;
        }

    .review-details p {
        color: #666;
        line-height: 1.6;
        margin-bottom: 10px;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }
</style>

<script>
    // Place order button
    document.getElementById('placeOrderBtn').addEventListener('click', function() {
        // Check terms agreement
        if (!document.getElementById('terms').checked) {
            alert('Please agree to the Terms and Conditions to place your order.');
            return;
        }

        // Show loading modal
        const modal = document.getElementById('loadingModal');
        modal.style.display = 'flex';

        // Simulate processing time
        setTimeout(() => {
            // Redirect to success page
            window.location.href = '@Url.Action("Step4", "Checkout")';
        }, 2000);
    });
</script>
